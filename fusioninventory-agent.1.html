<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>fusioninventory-agent - FusionInventory agent For Linux/UNIX, Windows and MacOSX</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#examples">EXAMPLES</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#ocs_inventory_protocol">OCS INVENTORY PROTOCOL</a></li>
	<ul>

		<li><a href="#first__the_prolog">First, The PROLOG</a></li>
		<li><a href="#module_execution">Module execution</a></li>
		<li><a href="#server_mode__windows_service_or_unix_daemon_">Server mode (Windows service or Unix daemon)</a></li>
	</ul>

	<li><a href="#options">OPTIONS</a></li>
	<ul>

		<li><a href="#target_definition_options">Target definition options</a></li>
		<li><a href="#target_scheduling_options">Target scheduling options</a></li>
		<li><a href="#task_selection_options">Task selection options</a></li>
		<li><a href="#inventory_task_specific_options">Inventory task specific options</a></li>
		<li><a href="#package_deployment_task_specific_options">Package deployment task specific options</a></li>
		<li><a href="#server_target_specific_options">Server target specific options</a></li>
		<li><a href="#web_interface_options">Web interface options</a></li>
		<li><a href="#logging_options">Logging options</a></li>
		<li><a href="#configuration_options">Configuration options</a></li>
		<li><a href="#execution_mode_options">Execution mode options</a></li>
	</ul>

	<li><a href="#configuration">CONFIGURATION</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>fusioninventory-agent - FusionInventory agent For Linux/UNIX, Windows and MacOSX</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p><strong>fusioninventory-agent</strong> [options] [--server server|--local directory|--sdout]</p>
<pre>
  Target definition options
    -s --server=URI     send tasks result to a server
    -l --local=DIR      write tasks results in a directory
    --stdout            write tasks result on STDOUT</pre>
<pre>
  Target scheduling options
    --delaytime=DURATION        maximum initial delay before first target, in seconds (3600)
    -w --wait=DURATION          maximum delay between each target, in seconds
    --lazy                      do not contact the target before next scheduled time</pre>
<pre>
  Task selection options
    --list-tasks        list available tasks and exit
    --no-task=TASK      do not run given task</pre>
<pre>
  Inventory task specific options
    --no-category=CATEGORY do not list given category items
    --scan-homedirs     allow to scan use home directories (false)
    --html              save the inventory as HTML (false)
    -f --force          always send data to server (false)
    -t --tag=TAG        mark the machine with given tag
    --backend-collect-timeout   timeout for inventory modules execution (30)
    --additional-content=FILE   additional inventory content</pre>
<pre>
  Package deployment task specific options
    --no-p2p            do not use peer to peer to download files (false)</pre>
<pre>
  Network options:
    -P --proxy=PROXY    proxy address
    -u --user=USER      user name for server authentication
    -p --password=PWD   password for server authentication
    --ca-cert-dir=D     path to the CA certificates directory
    --ca-cert-file=F    path to the CA certificates file
    --no-ssl-check      do not check server SSL certificates (false)
    --timeout           connection timeout (180)</pre>
<pre>
  Web interface options
    --no-httpd                 disable embedded web server (false)
    --httpd-ip=IP              network interface to listen to
    --httpd-port=PORT          network port to listen to (62354)
    --httpd-trust=RANGE        trust requests from range without authentication token (false)</pre>
<pre>
  Logging options
    --logger=BACKEND            logger backend [Stderr|File|Syslog] (Stderr)
    --logfile=FILE              log file
    --logfile-maxsize=X         maximum size of the log file in MB (0)
    --logfacility=FACILITY      syslog facility (LOG_USER)
    --color                     use color in the console (false)</pre>
<pre>
  Configuration options
    --config=BACKEND            configuration backend [file|registry|none]
    --conf-file=FILE            configuration file</pre>
<pre>
  Execution mode options
    -d --daemon                 run the agent as a daemon (false)
    --no-fork                   don't fork in background (false)
    --debug                     debug mode (false)
    --version                   print the version and exit</pre>
<p>
</p>
<hr />
<h1><a name="examples">EXAMPLES</a></h1>
<pre>
    % fusioninventory-agent --server localhost
    # execute all available tasks required by a local server</pre>
<pre>
    % fusioninventory-agent --server <a href="http://localhost/ocsinventory2">http://localhost/ocsinventory2</a>
    # execute all available tasks required by a local server, using a specific
    # URI</pre>
<pre>
    % fusioninventory-agent --server https://localhost/ocsinventory
    # execute all available tasks required by a local server, using a secure
    # connection</pre>
<pre>
    % fusioninventory-agent --server localhost --user test --password s3cr3t
    # execute all available tasks required by a local server, using HTTP
    # authentication</pre>
<pre>
    % fusioninventory-agent --local /tmp
    # execute all available tasks and write the result in /tmp directory</pre>
<pre>
    % fusioninventory-agent --local /tmp --html
    # execute all available tasks and write the result in /tmp directory in
    # HTML format</pre>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p><em class="file">fusioninventory-agent</em> is an agent for OCS Inventory server and
FusionInventory for GLPI servers. It creates local inventory of the machines
(hardware and software) and send it to the server. It can also write it
in a local XML file.
This agent is the successor of the former linux_agent which was released with
OCS 1.01 and prior. It also replaces the Solaris/AIX/BSD unofficial agents.</p>
<p>Supported systems:</p>
<dl>
<dt><strong><a name="windows" class="item"><em class="file">Windows</em> (since Windows 2000)</a></strong></dt>

<dt><strong><a name="gnu_linux" class="item"><em class="file">GNU/Linux</em></a></strong></dt>

<dt><strong><a name="macosx" class="item"><em class="file">MacOSX</em></a></strong></dt>

<dt><strong><a name="solaris" class="item"><em class="file">Solaris</em></a></strong></dt>

<dt><strong><a name="freebsd" class="item"><em class="file">FreeBSD</em></a></strong></dt>

<dt><strong><a name="netbsd" class="item"><em class="file">NetBSD</em></a></strong></dt>

<dt><strong><a name="openbsd" class="item"><em class="file">OpenBSD</em></a></strong></dt>

<dt><strong><a name="aix" class="item"><em class="file">AIX</em></a></strong></dt>

<dt><strong><a name="hp_ux" class="item"><em class="file">HP-UX</em></a></strong></dt>

<dt><strong><a name="gnu_kfreebsd" class="item"><em class="file">GNU/kFreeBSD</em></a></strong></dt>

</dl>
<p>
</p>
<hr />
<h1><a name="ocs_inventory_protocol">OCS INVENTORY PROTOCOL</a></h1>
<p>FusionInventory Agent uses OCS Inventory protocol and is compatible with OCS
Inventory server. The agent uses the same protocol with the FusionInventory
For GLPI plugin.</p>
<p>The OCS protocol is basicly an exchange of XML file done over HTTP(S).</p>
<p>
</p>
<h2><a name="first__the_prolog">First, The PROLOG</a></h2>
<p>The agent send a first message to give it's ID (DEVICEID). The
server send back to the agent an XML file with a list of parameter. It's the
PROLOG RESP. You can see it if you're in Debug mode.
In this PROLOG, the server send the PROLOG_FREQ. The agent will use it to
know when it need to contact the server for the next time.</p>
<p>The agent compute the next query date this way:</p>
<pre>
     PROLOG_FREQ/2+RANDOM(PROLOG_FREQ/2)</pre>
<p>
</p>
<h2><a name="module_execution">Module execution</a></h2>
<p>The agent will launch each modules and pass the list of options found in the
PROLOG RESP as parameter. The module can send information directly to the
server (inventory, SNMP scan result, etc)</p>
<p>
</p>
<h2><a name="server_mode__windows_service_or_unix_daemon_">Server mode (Windows service or Unix daemon)</a></h2>
<p>In server mode, the agent wait during a period between the last PROLOG and
PROLOG_FREQ. If PROLOG_FREQ is not set, it will use --delaytime value.
The default value is 3600.</p>
<p>
</p>
<hr />
<h1><a name="options">OPTIONS</a></h1>
<p>Most of the options are available in a <em>short</em> form and a <em>long</em> form.  For
example, the two lines below are all equivalent:</p>
<pre>
    % fusioninventory-agent -s localhost
    % fusioninventory-agent --server localhost</pre>
<p>
</p>
<h2><a name="target_definition_options">Target definition options</a></h2>
<dl>
<dt><strong><a name="s_server_uri" class="item"><strong>-s</strong>, <strong>--server</strong>=<em>URI</em></a></strong></dt>

<dd>
<p>Send results of tasks execution to given server.</p>
<p>If <em>URI</em> doesn't start with http:// or https://, the agent assume the
parameter is a hostname and rewrite it as:</p>
<pre>
    % --server=<a href="http://servername/ocsinventory">http://servername/ocsinventory</a></pre>
<p>In general, OCS Inventory server URL have this format:</p>
<pre>
    <a href="http://servername/ocsinventory">http://servername/ocsinventory</a></pre>
<p>and FusionInventory for GLPI this one:</p>
<pre>
    <a href="http://servername/glpi/plugins/fusioninventory/front/plugin_fusioninventory.communication.php">http://servername/glpi/plugins/fusioninventory/front/plugin_fusioninventory.communication.php</a></pre>
<p>Multiple values can be specified, using comma as a separator.</p>
</dd>
<dt><strong><a name="l_local_dir" class="item"><strong>-l</strong>, <strong>--local</strong>=<em>DIR</em></a></strong></dt>

<dd>
<p>Write the results of tasks execution to given directory.</p>
</dd>
<dt><strong><a name="stdout" class="item"><strong>--stdout</strong></a></strong></dt>

<dd>
<p>Write the results of tasks execution on stdout.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="target_scheduling_options">Target scheduling options</a></h2>
<dl>
<dt><strong><a name="delaytime_limit" class="item"><strong>--delaytime</strong>=<em>LIMIT</em></a></strong></dt>

<dd>
<p>Set an initial delay before the first target, whose value is computed randomly
between LIMIT / 2 and LIMIT seconds. This setting is ignored for server targets
after the initial contact, in favor of server-specified parameter
(PROLOG_FREQ).</p>
</dd>
<dt><strong><a name="w_limit_wait_limit" class="item"><strong>-w</strong> <em>LIMIT</em>, <strong>--wait</strong>=<em>LIMIT</em></a></strong></dt>

<dd>
<p>Set a delay between each targets, whose value is computed randomly between 0
and LIMIT seconds.</p>
</dd>
<dt><strong><a name="lazy" class="item"><strong>--lazy</strong></a></strong></dt>

<dd>
<p>Do not contact the target before next scheduled time.</p>
<p>This option is only available when the agent is not run as a server.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="task_selection_options">Task selection options</a></h2>
<dl>
<dt><strong><a name="no_task_task" class="item"><strong>--no-task</strong>=<em>TASK</em></a></strong></dt>

<dd>
<p>Disable the given task</p>
</dd>
<dt><strong><a name="list_tasks" class="item"><strong>--list-tasks</strong></a></strong></dt>

<dd>
<p>List available tasks and exit</p>
</dd>
</dl>
<p>
</p>
<h2><a name="inventory_task_specific_options">Inventory task specific options</a></h2>
<dl>
<dt><strong><a name="no_category_category" class="item"><strong>--no-category</strong>=<em>CATEGORY</em></a></strong></dt>

<dd>
<p>Do not list given category items in inventory.</p>
</dd>
<dt><strong><a name="scan_homedirs" class="item"><strong>--scan-homedirs</strong></a></strong></dt>

<dd>
<p>Allow the agent to scan home directories for virtual machines.</p>
</dd>
<dt><strong><a name="html" class="item"><strong>--html</strong></a></strong></dt>

<dd>
<p>Save the inventory as HTML.</p>
<p>This is only used for local inventories.</p>
</dd>
<dt><strong><a name="f_force" class="item"><strong>-f</strong>, <strong>--force</strong></a></strong></dt>

<dd>
<p>Send an inventory to the server, even if this last one doesn't ask for it.</p>
</dd>
<dt><strong><a name="tag_tag" class="item"><strong>--tag</strong>=<em>TAG</em></a></strong></dt>

<dd>
<p>Mark the machine with given tag.</p>
</dd>
<dt><strong><a name="backend_collect_timeout_time" class="item"><strong>--backend-collect-timeout</strong>=<em>TIME</em></a></strong></dt>

<dd>
<p>Timeout for inventory modules execution.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="package_deployment_task_specific_options">Package deployment task specific options</a></h2>
<dl>
<dt><strong><a name="no_p2p" class="item"><strong>--no-p2p</strong></a></strong></dt>

<dd>
<p>Do not use peer to peer to download files.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="server_target_specific_options">Server target specific options</a></h2>
<dl>
<dt><strong><a name="p_proxy_proxy" class="item"><strong>-P</strong>, <strong>--proxy</strong>=<em>PROXY</em></a></strong></dt>

<dd>
<p>Use <em>PROXY</em> as HTTP proxy.</p>
<p>By default, the agent uses HTTP_PROXY environment variable.</p>
</dd>
<dt><strong><a name="u_user_user_user" class="item"><strong>-u</strong> <em>USER</em>, <strong>--user</strong>=<em>USER</em></a></strong></dt>

<dd>
<p>Use <em>USER</em> for server authentication.</p>
</dd>
<dt><strong><a name="p_password_password" class="item"><strong>-p</strong>, <strong>--password</strong>=<em>PASSWORD</em></a></strong></dt>

<dd>
<p>Use <em>PASSWORD</em> for server authentication.</p>
</dd>
<dt><strong><a name="ca_cert_dir_path" class="item"><strong>--ca-cert-dir</strong>=<em>PATH</em></a></strong></dt>

<dd>
<p>Path to the CA certificates directory.</p>
</dd>
<dt><strong><a name="ca_cert_file_file" class="item"><strong>--ca-cert-file</strong>=<em>FILE</em></a></strong></dt>

<dd>
<p>Path to the CA certificates file.</p>
</dd>
<dt><strong><a name="no_ssl_check" class="item"><strong>--no-ssl-check</strong></a></strong></dt>

<dd>
<p>Do not check server SSL certificates.</p>
<p>Hint: you can set HTTPS_DEBUG environment variable to get SSL error messages in
the console.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="web_interface_options">Web interface options</a></h2>
<dl>
<dt><strong><a name="no_httpd" class="item"><strong>--no-httpd</strong></a></strong></dt>

<dd>
<p>Disable the embedded web server.</p>
</dd>
<dt><strong><a name="httpd_ip_ip" class="item"><strong>--httpd-ip</strong>=<em>IP</em></a></strong></dt>

<dd>
<p>The network interface to use for the embedded web server (all 
available interfaces).</p>
</dd>
<dt><strong><a name="httpd_port_port" class="item"><strong>--httpd-port</strong>=<em>PORT</em></a></strong></dt>

<dd>
<p>The network port to use for the embedded web server (62354).</p>
</dd>
<dt><strong><a name="httpd_trust_range" class="item"><strong>--httpd-trust</strong>=<em>RANGE</em></a></strong></dt>

<dd>
<p>Trust requests from given range without authentication token (false).</p>
<p>For example: &quot;192.168.0.0/24&quot;, &quot;192.68.168.0.5&quot; or an IP range like
&quot;20.34.101.207 - 201.3.9.99&quot;. See <a href="/Net/IP.html">the Net::IP manpage</a> documentation to get more example.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="logging_options">Logging options</a></h2>
<dl>
<dt><strong><a name="logger_backend" class="item"><strong>--logger</strong>=<em>BACKEND</em></a></strong></dt>

<dd>
<p>Logger backend to use. It can be:</p>
<dl>
<dt>
<dd>
<p>Stderr: log messages directly in the console.</p>
</dd>
<dt>
<dd>
<p>File: log messages in a file.</p>
</dd>
<dt>
<dd>
<p>Syslog: log messages through the local syslog server</p>
</dd>
</dl>
<p>Multiple values can be specified, using comma as a separator.</p>
</dd>
<dt><strong><a name="logfile_file" class="item"><strong>--logfile</strong>=<em>FILE</em></a></strong></dt>

<dd>
<p>Log message in <em>FILE</em> (implies File logger backend)</p>
</dd>
<dt><strong><a name="logfile_maxsize_file" class="item"><strong>--logfile-maxsize</strong>=<em>FILE</em></a></strong></dt>

<dd>
<p>Max logfile size in MB, default is unlimited. When the max size is reached, the
file is truncated. This is only useful if there is no log rotation mechanism on
the system.</p>
</dd>
<dt><strong><a name="logfacility_facility" class="item"><strong>--logfacility</strong>=<em>FACILITY</em></a></strong></dt>

<dd>
<p>Syslog facility to use (default LOG_USER)</p>
</dd>
<dt><strong><a name="color" class="item"><strong>--color</strong></a></strong></dt>

<dd>
<p>Display color on the terminal, when the Stderr backend is used.</p>
<p>This options is ignored on Windows.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="configuration_options">Configuration options</a></h2>
<dl>
<dt><strong><a name="conf_file_file" class="item"><strong>--conf-file</strong>=<em>FILE</em></a></strong></dt>

<dd>
<p>Use <em>FILE</em> as configuration file (implies file configuration backend)</p>
</dd>
<dt><strong><a name="config_backend" class="item"><strong>--config</strong>=<em>BACKEND</em></a></strong></dt>

<dd>
<p>Configuration backend to use. It can be:</p>
<dl>
<dt>
<dd>
<p>file: read configuration from a file (default anywhere else as Windows)</p>
</dd>
<dt>
<dd>
<p>registry: read configuration from the registry (default on Windows)</p>
</dd>
<dt>
<dd>
<p>none: don't read any configuration</p>
</dd>
</dl>
</dd>
</dl>
<p>
</p>
<h2><a name="execution_mode_options">Execution mode options</a></h2>
<dl>
<dt><strong><a name="d_daemon" class="item"><strong>-d</strong>, <strong>--daemon</strong></a></strong></dt>

<dd>
<p>Run the agent as a daemon.</p>
</dd>
<dt><strong><a name="no_fork" class="item"><strong>--no-fork</strong></a></strong></dt>

<dd>
<p>Don't fork in background.</p>
<p>This is only useful when running as a daemon.</p>
</dd>
<dt><strong><a name="debug" class="item"><strong>--debug</strong></a></strong></dt>

<dd>
<p>Turn the debug mode on.</p>
</dd>
<dt><strong><a name="setup" class="item"><strong>--setup</strong></a></strong></dt>

<dd>
<p>Print the agent setup directories and exit.</p>
</dd>
<dt><strong><a name="version" class="item"><strong>--version</strong></a></strong></dt>

<dd>
<p>Print the version and exit.</p>
</dd>
</dl>
<p>
</p>
<hr />
<h1><a name="configuration">CONFIGURATION</a></h1>
<p>The agent is able to use multiple configuration backends. The registry backend
is the default on Windows platform, and the file backend is the default
everywhere else. Another backend can be specified using the <strong>--config</strong> option.</p>
<p>The <em>file</em> backend reads configuration directives from a configuration file,
whose default location is determined at installation time as
PREFIX/etc/agent.cfg. An alternative location can also be given with
<strong>--conf-file</strong> option.</p>
<p>The <em>registry</em> backend reads configuration directives from the Windows
registry, with an arch-dependant location:</p>
<ul>
<li><strong><a name="hkey_local_machine_software_fusioninventory_agent_for_32_bits_machines" class="item"><em class="file">HKEY_LOCAL_MACHINE\SOFTWARE\FusionInventory-Agent</em> for 32 bits machines</a></strong>

</li>
<li><strong><a name="hkey_local_machine_software_wow6432node_fusioninventory_agent_for_64_bits_machines" class="item"><em class="file">HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\FusionInventory-Agent</em> for 64 bits machines</a></strong>

</li>
</ul>
<p>The <em>none</em> backend doesn't read any configuration directive at all, allowing
to isolate the agent execution from any installed configuration.</p>

</body>

</html>
